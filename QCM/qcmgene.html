<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>QCM GENE</title>
<style>
:root{
  --bg:#0f172a;
  --card:#1e293b;
  --text:#e5e7eb;
  --muted:#9ca3af;
  --ok:#22c55e;
  --bof:#fbbf24;
  --bad:#ef4444;
  --btn:#2563eb;
  --surface:#0b1223;
  --border:#334155;
}
/* ===== Palette inspir√©e du logo Sabena technics ===== */
:root[data-theme="light"]{
  --bg:#f5f7fa;
  --card:#ffffff;
  --text:#111827;           /* Texte principal : noir anthracite */
  --muted:#374151;          /* Sous-titres : gris fonc√© */
  --ok:#007A33;             /* Vert Sabena (validation) */
  --bof:#FFD200;            /* Jaune Sabena */
  --bad:#C1121F;            /* Rouge profond (erreur) */
  --btn:#003366;            /* Bleu Sabena */
  --surface:#f0f4f8;        /* Fond clair homog√®ne */
  --border:#cbd5e1;         /* Bordures neutres */
}

:root[data-theme="light"] .opt{
  color: var(--text);
  background:#ffffff;
  border-color: var(--border);
}
:root[data-theme="light"] .opt:hover,
:root[data-theme="light"] .opt:focus{
  outline: 2px solid var(--btn);
  background: color-mix(in srgb, var(--btn) 6%, #fff);
}
:root[data-theme="light"] .opt.correct{
  outline-color: var(--ok);
  background: color-mix(in srgb, var(--ok) 15%, #fff);
  color: var(--text);
}
:root[data-theme="light"] .opt.wrong{
  outline-color: var(--bad);
  background: color-mix(in srgb, var(--bad) 10%, #fff);
  color: var(--text);
}
:root[data-theme="light"] .badge-status.badge-ok{ color: var(--ok); }
:root[data-theme="light"] .badge-status.badge-bof{ color: var(--bof); }
:root[data-theme="light"] .badge-status.badge-bad{ color: var(--bad); }

:root[data-theme="light"] button{ background: var(--btn); color: #fff; }
:root[data-theme="light"] .btn-gray{ background: var(--surface); color: var(--text); }

html,body{height:100%}
body{
  margin:0;
  background:var(--bg);
  color:var(--text);
  font-family:system-ui,Segoe UI,Roboto,sans-serif;
  padding:16px;
  display:flex;
  justify-content:center;   /* ‚úÖ centre horizontalement */
  align-items:flex-start;    /* garde le haut visible (√©vite centrage vertical complet) */
  min-height:100vh;          /* occupe toute la hauteur de la fen√™tre */
}

.card{background:var(--card);border:1px solid var(--border);border-radius:12px;box-shadow:0 8px 24px rgba(0,0,0,.15);padding:16px}
.main{
  width:100%;
  max-width:900px;
}

.side{width:340px;min-width:300px;max-height:90vh;overflow:auto;display:flex;flex-direction:column;gap:12px}
h1{margin:0 0 10px}
.row{display:flex;gap:8px;align-items:center;flex-wrap:wrap}
select,input,button{padding:8px;border-radius:10px;border:1px solid var(--border);background:var(--surface);color:var(--text)}
button{cursor:pointer;background:var(--btn);color:#fff;border:none}
.btn-gray{background:var(--surface);color:var(--text)}
.pill{background:var(--surface);border:1px solid var(--border);border-radius:999px;padding:6px 10px;display:inline-flex;gap:6px;align-items:center}
.grid{display:grid;grid-template-columns:1fr 1fr;gap:10px}
.opt{
  background:var(--surface);border:1px solid var(--btn);border-radius:10px;
  padding:14px 16px;cursor:pointer;text-align:left;font-size:1.05rem;font-weight:600;
  transition:transform .12s ease
}
.opt:hover{transform:scale(1.02)}
.opt.correct{outline:2px solid var(--ok);background:rgba(34,197,94,.12)}
.opt.wrong{outline:2px solid var(--bad);background:rgba(239,68,68,.12)}
.muted{color:var(--muted);font-size:.92rem}
.timer{background:var(--surface);border:1px solid var(--border);padding:6px 10px;border-radius:999px}
.badge{background:var(--surface);border:1px solid var(--border);border-radius:999px;padding:2px 8px;font-size:.8rem}
.badge-status{margin-left:8px;padding:2px 10px;border-radius:999px;font-size:.9rem;border:1px solid var(--border);display:none}
.badge-ok{color:var(--ok)}
.badge-bof{color:var(--bof)}
.badge-bad{color:var(--bad)}
table{width:100%;border-collapse:collapse}
th,td{padding:8px;border-bottom:1px solid var(--border);text-align:left}
th{color:var(--muted)}
.log{background:var(--surface);padding:10px;border-radius:8px;height:300px;overflow:auto}
.ok{color:var(--ok)} .bof{color:var(--bof)} .bad{color:var(--bad)}
.hl{font-weight:700;text-decoration:underline}
.progressbar{height:8px;background:var(--surface);border:1px solid var(--border);border-radius:999px;overflow:hidden}
.progressbar > div{height:100%;background:var(--btn);width:0%}
.svg-wrap{background:var(--surface);border:1px solid var(--border);border-radius:10px;padding:8px}
hr{border:none;border-top:1px solid var(--border);margin:12px 0}
.small{font-size:.9rem}
@media (max-width:640px){
  .grid{grid-template-columns:1fr}
}

</style>
</head>
<body>
  
  <div class="card main">
    <div class="row" style="justify-content:space-between">
      <h1>‚úàÔ∏è QCM GENE</h1>
      
      <button id="themeToggle" class="btn-gray" title="Changer de th√®me">üåô/‚òÄÔ∏è</button>
    <button id="homeBtn" class="btn-gray" title="Retour √† l'accueil">üè† Accueil</button>
    </div>
    <script>
    document.getElementById("homeBtn").addEventListener("click", () => {
    window.location.href = "https://adpmt.github.io/QCM-ADPMT/";
    });
    </script>
    
    <!-- Outils -->
    <div class="row">
      <div style="min-width:160px">
        <label class="small">Pseudo</label>
        <input id="pseudoInput" placeholder="Ton nom" maxlength="20" />
      </div>

      <div class="pill"><span>‚è±Ô∏è</span><b id="timer">0</b>s</div>
      <div class="pill">Score: <b id="score">0</b></div>
    </div>

    <!-- Question -->
    <div class="card" style="margin-top:10px">
      <div class="row" style="justify-content:space-between;align-items:center">
        <div style="font-size:1.2rem;font-weight:700">
          <span id="progressTxt">Question 0/0</span>
          <span id="prevBadge" class="badge-status">OK</span>
        </div>
        <div class="progressbar" style="flex:1;max-width:360px">
          <div id="progressBar"></div>
        </div>
      </div>
      <p id="question" style="font-size:1.25rem;font-weight:700;margin:8px 0">Clique sur D√©marrer</p>
      <div id="choices" class="grid"></div>
      <div id="feedback" class="muted" style="min-height:28px;margin-top:6px"></div>

      <div class="row" style="margin-top:8px">
        <button id="startBtn">D√©marrer</button>
        <button id="pauseBtn" class="btn-gray" disabled>Pause</button>
        <button id="stopBtn" class="btn-gray" disabled>Stop</button>
        <button id="resumeBtn" class="btn-gray" style="display:none">Reprendre</button>
      </div>
    </div>

    <!-- R√©sum√© -->
    <div id="summaryCard" class="card" style="margin-top:10px;display:block">
      <h3 style="margin:0 0 6px">R√©sum√©</h3>
      <div id="summaryStats" class="muted"></div>
      <div id="summaryList" class="muted" style="height:220px;overflow:auto;margin-top:8px"></div>
      <div class="row" style="margin-top:8px">
        <button id="printSummary" class="btn-gray">Imprimer</button>
        <button id="closeSummary" class="btn-gray">Fermer</button>
      </div>
    </div>

<div id="scoreBoardCard" class="card" style="margin-top:10px">
  <h3 style="margin:0 0 6px">Tableau des scores</h3>
  <div class="muted small">Affiche les 10 derniers (stocke 30 max).</div>
  <table>
    <thead>
      <tr><th>Pseudo</th><th>Score</th><th>%</th><th>Date</th></tr>
    </thead>
    <tbody id="scoreTableBody"></tbody>
  </table>
  <div class="row" style="margin-top:6px">
    <button id="clearScores" class="btn-gray">Effacer</button>
  </div>
</div>

    <!-- Progression -->
    <div class="card" style="margin-top:10px">
      <h3 style="margin:0 0 6px">üìà Progression</h3>
      <div class="svg-wrap"><svg id="chart" viewBox="0 0 320 120" width="100%" height="120" aria-label="Courbe des %"></svg></div>
    </div>
  </div>



<script>
// ====== Helpers
const $ = s => document.querySelector(s);
const pad2 = n => String(n).padStart(2,'0');
const nowStamp = () => { const d=new Date(); return `${pad2(d.getDate())}/${pad2(d.getMonth()+1)}/${String(d.getFullYear()).slice(-2)} ${pad2(d.getHours())}:${pad2(d.getMinutes())}`; };
function shuffle(a){ for(let i=a.length-1;i>0;i--){ const j=Math.floor(Math.random()*(i+1)); [a[i],a[j]]=[a[j],a[i]] } return a; }

// ====== Th√®me
const THEME_KEY='ata_theme';
(function applyTheme(){
  const t = localStorage.getItem(THEME_KEY)||'dark';
  document.documentElement.setAttribute('data-theme', t==='light'?'light':'dark');
})();
$('#themeToggle').onclick=()=>{
  const cur=document.documentElement.getAttribute('data-theme')==='light'?'light':'dark';
  const nxt=cur==='light'?'dark':'light';
  document.documentElement.setAttribute('data-theme',nxt);
  localStorage.setItem(THEME_KEY,nxt);
};

// ====== Storage keys
const LS_SCORES='qcmgene_scores_v2';
const LS_PSEUDO='qcmgene_pseudo_v2';
const LS_SNAPSHOT='qcmgene_snapshot_v1';

// ====== √âtat
let running=false, paused=false, i=0, score=0;
let questionOrder=[], filteredQuestions=[];
let timeLeft=0, tickHandle=null, mode='TRAIN', perQ=15;
let answersLog=[];

// ====== DOM
const qEl=$('#question'), choicesEl=$('#choices'), feedbackEl=$('#feedback');
const timerEl=$('#timer'), scoreEl=$('#score'), progressTxt=$('#progressTxt'), progressBar=$('#progressBar');
const pseudoInput=$('#pseudoInput'); pseudoInput.value=localStorage.getItem(LS_PSEUDO)||'';
pseudoInput.addEventListener('change',()=>localStorage.setItem(LS_PSEUDO,pseudoInput.value.trim()));

// ====== Questions (exemple) ‚Äî remplace/compl√®te par ta liste compl√®te si besoin
let QUESTIONS = [
// ATA 20 ‚Äì Pratiques standard (maintenance)
  { "q":"Dans le cadre des proc√©dures de maintenance moteur, la ventilation dite ¬´ s√®che ¬ª est exig√©e apr√®s quelle op√©ration ?","choices":["Un lavage du compresseur","Un arr√™t moteur standard","Une mise en stockage prolong√©e"],"answer":0 },
  { "q":"L‚Äôutilisation d‚Äôune cale de type GO / NO GO permet principalement de contr√¥ler :","choices":["Une d√©formation g√©om√©trique de pale","Le jeu ou l‚Äô√©cartement des cannelures du moyeu","Un d√©faut de structure sur une pale composite"],"answer":1 },
  { "q":"Concernant les limitations de stockage, la dur√©e maximale admissible est d√©finie par :","choices":["Une dur√©e calendaire fixe de 3 ans","Une dur√©e calendaire fixe de 5 ans","La limite de validit√© des √©l√©ments √©lastom√®res de d√©givrage"],"answer":2 },
  { "q":"Sur les avions de g√©n√©ration r√©cente (ex. A330), quel syst√®me assure la centralisation des donn√©es de maintenance ?","choices":["FWC","SDAC","CMC","DMC"],"answer":2 },
  { "q":"Pour l‚Äôacc√®s aux fonctions de maintenance via le cockpit, combien de MCDU peuvent √™tre exploit√©es simultan√©ment ?","choices":["Une seule unit√©","Deux unit√©s au maximum","Trois unit√©s simultan√©ment","Aucune, l‚Äôacc√®s est externe uniquement"],"answer":1 },
  { "q":"Avant toute mise en rotation moteur lors d‚Äôune action de maintenance, la condition imp√©rative li√©e √† la zone de danger est :","choices":["La pr√©sence d‚Äôun extincteur √† proximit√©","La confirmation visuelle et verbale de l‚Äô√©vacuation de la zone","La mise en place d‚Äôune signalisation lumineuse uniquement"],"answer":1 },
  { "q":"Lors d‚Äôune intervention sur un moteur r√©cemment arr√™t√©, le principal risque li√© √† l‚Äôabsence de ventilation pr√©alable est :","choices":["Une d√©t√©rioration des capteurs moteur","Une inflammation de vapeurs r√©siduelles de carburant","Une d√©charge √©lectrique des calculateurs"],"answer":1 },
  { "q":"Dans les proc√©dures constructeur, une op√©ration de ventilation moteur est consid√©r√©e comme correctement r√©alis√©e lorsque :","choices":["Le moteur a effectu√© un nombre de tours pr√©d√©fini sans allumage ni carburant","La pression carburant est nulle","La temp√©rature EGT est revenue √† temp√©rature ambiante"],"answer":0 },
  { "q":"La consultation des donn√©es de maintenance enregistr√©es dans le CMC permet notamment :","choices":["La remise √† z√©ro automatique des d√©fauts","L‚Äôidentification et l‚Äôhistorique des pannes enregistr√©es","Le recalage automatique des capteurs moteur"],"answer":1 },
  { "q":"En maintenance Part-66, l‚Äôacc√®s aux fonctions de test via MCDU est autoris√© uniquement si :","choices":["L‚Äôavion est aliment√© √©lectriquement","Les conditions de s√©curit√© d√©finies par la proc√©dure sont respect√©es","Les moteurs sont arr√™t√©s depuis plus de 30 minutes"],"answer":1 },
// ATA 29 ‚Äì Hydraulique (niveau Part-66 tr√®s difficile)
{"q":"La r√©gulation du pas d‚Äôune h√©lice hydraulique utilise une √©nergie issue du circuit principal, ce qui implique directement :","choices":["Une d√©pendance √† la pression hydraulique disponible","Une alimentation ind√©pendante du moteur","Un fonctionnement purement m√©canique"],"answer":0},
{"q":"Sur un avion de transport, une pression nominale de 3000 PSI permet principalement :","choices":["Une r√©duction du diam√®tre des actionneurs","Une augmentation du d√©bit volumique","Une diminution de la temp√©rature du fluide"],"answer":0},
{"q":"Dans un circuit hydraulique standard, l‚Äôabsence d‚Äôaccumulateur aurait pour cons√©quence directe :","choices":["Des variations de pression non amorties","Une perte imm√©diate de d√©bit","Une cavitation syst√©matique de la pompe"],"answer":0},
{"q":"L‚Äôutilisation d‚Äôun fluide hydraulique synth√©tique en aviation est principalement justifi√©e par :","choices":["Sa stabilit√© thermique et sa r√©sistance au feu","Sa compatibilit√© universelle avec tous joints","Sa faible densit√©"],"answer":0},
{"q":"Lors de la mise sous pression d‚Äôun circuit par √©lectropompe, un d√©bit nul avec pression nominale indique g√©n√©ralement :","choices":["Un actionneur en but√©e","Une pompe d√©fectueuse","Une fuite externe majeure"],"answer":0},
{"q":"La pr√©charge azote d‚Äôun accumulateur est critique car elle conditionne :","choices":["La capacit√© d‚Äôabsorption des pics de pression","La pression maximale du circuit","La temp√©rature du fluide"],"answer":0},
{"q":"Le PTU permet la transmission d‚Äô√©nergie hydraulique sans m√©lange de fluide, ce qui implique :","choices":["Une s√©paration stricte des circuits","Un √©quilibrage automatique des pressions","Une alimentation √©lectrique de secours"],"answer":0},
{"q":"Dans un circuit hydraulique, une augmentation de pression sans variation de d√©bit traduit g√©n√©ralement :","choices":["Une charge accrue sur l‚Äôactionneur","Une augmentation de la vitesse de d√©placement","Une fuite interne"],"answer":0},
{"q":"Les marquages triangulaires gris sur les tuyauteries hydrauliques indiquent principalement :","choices":["L‚Äôidentification du circuit et le sens d‚Äô√©coulement","Une zone de danger thermique","Un circuit de drainage"],"answer":0},
{"q":"Lorsqu‚Äôune vanne d‚Äôisolement hydraulique se ferme automatiquement en vol, la cause probable est :","choices":["Une d√©tection de fuite ou de surtemp√©rature","Une baisse de quantit√© carburant","Une surcharge √©lectrique"],"answer":0},
{"q":"Une indication hydraulique absente au cockpit avec pression r√©elle pr√©sente indique g√©n√©ralement :","choices":["Une d√©faillance de capteur ou de transmission","Une perte r√©elle de pression","Un d√©faut de pompe"],"answer":0},
{"q":"La valve de surpression de b√¢che a pour r√¥le essentiel de :","choices":["Prot√©ger la b√¢che contre la dilatation thermique du fluide","R√©guler la pression du circuit principal","Maintenir la quantit√© de fluide"],"answer":0},
{"q":"Le refroidissement hydraulique par √©changeur fuel/hydraulic devient inefficace principalement lorsque :","choices":["Le carburant est chaud","Le d√©bit hydraulique est trop faible","La pression carburant chute"],"answer":0},
{"q":"Un filtre haute pression colmat√© provoque en priorit√© :","choices":["Une chute de d√©bit en aval de la pompe","Une augmentation de pression en amont","Une contamination accrue du fluide"],"answer":1},
{"q":"Le risque majeur d‚Äôune injection hydraulique sous la peau est li√© :","choices":["√Ä la toxicit√© du fluide et √† la n√©crose tissulaire","√Ä une br√ªlure thermique","√Ä une √©lectrisation"],"answer":0},
{"q":"Avant toute remise en pression hydraulique, l‚Äôaction la plus critique en maintenance est :","choices":["La s√©curisation des zones de d√©battement","La v√©rification du niveau de fluide","La mise au neutre des commandes"],"answer":0},
{"q":"La RAT fournit une √©nergie de secours principalement destin√©e √† :","choices":["Garantir des commandes de vol minimales","Assurer la pressurisation cabine","Maintenir l‚Äô√©clairage int√©rieur"],"answer":0},
{"q":"Un accumulateur hydraulique n‚Äôa PAS pour fonction :","choices":["Stocker une √©nergie hydraulique","Amortir les coups de b√©lier","R√©guler le d√©bit du circuit"],"answer":2},
// ATA 33 ‚Äì √âclairage (niveau Part-66 tr√®s difficile)
{"q":"La s√©paration de l‚Äô√©clairage d‚Äôun a√©ronef en deux ensembles distincts r√©pond principalement √† :","choices":["Une logique de redondance √©lectrique","Une distinction fonctionnelle exploitation / s√©curit√©","Une contrainte de tension d‚Äôalimentation"],"answer":1},
{"q":"Une lampe √† incandescence se distingue d‚Äôune LED principalement par :","choices":["Un rendement lumineux sup√©rieur","Un principe bas√© sur l‚Äô√©chauffement d‚Äôun filament","Une n√©cessit√© de ballast"],"answer":1},
{"q":"L‚Äôintroduction d‚Äôiode dans une ampoule quartz permet essentiellement :","choices":["D‚Äôaugmenter la dur√©e de vie du filament","De stabiliser l‚Äôintensit√© lumineuse","De r√©duire la consommation √©lectrique"],"answer":0},
{"q":"Le fonctionnement d‚Äôune LED implique obligatoirement :","choices":["Un gaz sous pression","Une jonction semi-conductrice polaris√©e","Un filament chauff√©"],"answer":1},
{"q":"L‚Äô√©clairage rouge du cockpit est utilis√© de nuit car il :","choices":["Augmente la luminosit√© per√ßue","Pr√©serve l‚Äôadaptation de la vision nocturne","R√©duit la consommation √©lectrique"],"answer":1},
{"q":"En position ARM, l‚Äôallumage automatique de l‚Äô√©clairage de secours est conditionn√© par :","choices":["La perte d‚Äôalimentation normale","L‚Äôouverture d‚Äôune issue","La s√©lection manuelle pilote"],"answer":0},
{"q":"L‚Äôalimentation autonome des blocs d‚Äô√©clairage de secours est volontairement limit√©e √† basse tension afin de :","choices":["R√©duire la masse des c√¢blages","Limiter les risques √©lectriques en √©vacuation","Faciliter la recharge rapide"],"answer":1},
{"q":"L‚Äôacc√®s maintenance au syst√®me d‚Äô√©clairage cabine via le CMS implique :","choices":["Une interface MCDU","Un acc√®s direct depuis l‚ÄôECAM","Un acc√®s par le panneau FAP uniquement"],"answer":0},
{"q":"Le contr√¥le de l‚Äô√©clairage cabine par le CIDS permet notamment :","choices":["Une gestion centralis√©e et sc√©naris√©e","Une alimentation √©lectrique ind√©pendante","Un contr√¥le direct par les pilotes"],"answer":0},
{"q":"Le feu de navigation rouge positionn√© √† l‚Äôextr√©mit√© d‚Äôaile gauche permet :","choices":["La reconnaissance du sens de d√©placement de l‚Äôa√©ronef","L‚Äô√©clairage de piste","La signalisation d‚Äôurgence"],"answer":0},
// ATA 49 ‚Äì APU (niveau Part-66 tr√®s difficile)
{"q":"Le d√©marreur APU de type √©lectrique CA impose n√©cessairement :","choices":["Un redressement de courant","Un variateur de fr√©quence","Une source alternative adapt√©e"],"answer":2},
{"q":"La capacit√© de l‚ÄôAPU √† fournir simultan√©ment de l‚Äô√©nergie pneumatique et √©lectrique d√©pend :","choices":["Du r√©gime APU et des limitations constructeur","Uniquement de la temp√©rature ext√©rieure","De la quantit√© carburant avion"],"answer":0},
{"q":"Lors du d√©marrage moteur principal, l‚ÄôAPU agit comme source pneumatique en fournissant :","choices":["Un d√©bit d‚Äôair haute pression","Un d√©bit d‚Äôair r√©gul√© en temp√©rature","Un d√©bit d‚Äôair constant quelle que soit la charge"],"answer":0},
{"q":"Une EGT √©lev√©e avec stagnation du r√©gime APU traduit une anomalie de type :","choices":["Hot start","Hung start","Wet start"],"answer":1},
{"q":"La protection survitesse APU d√©clenche prioritairement :","choices":["Une r√©duction progressive de charge","Une coupure imm√©diate carburant","Un passage en mode d√©grad√©"],"answer":1},
{"q":"L‚Äôutilisation principale de l‚Äôair APU au sol concerne :","choices":["La pressurisation cabine","Le conditionnement et le d√©marrage moteur","Le refroidissement avionique"],"answer":1},
{"q":"Un arr√™t automatique APU peut √™tre d√©clench√© sans action √©quipage lorsque :","choices":["Les param√®tres d√©passent les limites certifi√©es","La charge √©lectrique chute","Un moteur principal d√©marre"],"answer":0},
{"q":"L‚Äôexploitation APU en vol est autoris√©e uniquement si :","choices":["Les conditions et limitations avion sont respect√©es","La temp√©rature ext√©rieure est n√©gative","Un moteur est inop√©rant"],"answer":0},
{"q":"Les informations de d√©faut APU accessibles en maintenance proviennent :","choices":["Du CMS via le MCDU","Du FADEC moteur principal","Du syst√®me ECAM uniquement"],"answer":0},
{"q":"La limitation majeure d‚Äôutilisation de l‚ÄôAPU en vol est li√©e principalement :","choices":["√Ä l‚Äôaltitude et √† la certification","√Ä la pression carburant","√Ä la charge hydraulique avion"],"answer":0},
// ATA 61 ‚Äì H√©lices (niveau Part-66 tr√®s difficile)
{"q":"La mise en position drapeau d‚Äôune h√©lice n‚Äôest possible que si le syst√®me permet :","choices":["Une variation continue de l‚Äôangle de pas au-del√† du pas fin","Un blocage m√©canique de la rotation","Une commande purement a√©rodynamique"],"answer":0},
{"q":"Dans un turbopropulseur, l‚Äô√©l√©vation de temp√©rature de l‚Äôair comprim√© intervient exclusivement dans :","choices":["La turbine haute pression","La soufflante","La bo√Æte de r√©duction","La chambre de combustion"],"answer":3},
{"q":"Sur un turbopropulseur certifi√© transport, la part majoritaire de la pouss√©e est fournie par :","choices":["Le flux r√©siduel des gaz","La tuy√®re","L‚Äôh√©lice","Le fan interne"],"answer":2},
{"q":"Quel concept de turbopropulseur a √©t√© abandonn√© en aviation moderne en raison de son rendement et de sa complexit√© ?","choices":["Turbine libre","Turbine li√©e","Turbine libre invers√©e","Axialo-centrifuge"],"answer":3},
{"q":"L‚Äôarchitecture moteur comportant une chambre de combustion invers√©e et un arbre de sortie avant est caract√©ristique du :","choices":["PT6","CFM56","Trent 700","Olympus 593"],"answer":0},
{"q":"La fonction essentielle du r√©ducteur sur un turbopropulseur est de :","choices":["Adapter la vitesse √©lev√©e de la turbine √† la vitesse optimale de l‚Äôh√©lice","Augmenter le couple moteur","Stabiliser la pouss√©e r√©siduelle"],"answer":0},
{"q":"La conversion de l‚Äô√©nergie cin√©tique des gaz en √©nergie m√©canique exploitable est assur√©e par :","choices":["Le compresseur","La turbine","La soufflante","Le r√©ducteur"],"answer":1},
{"q":"Un calage petit pas d‚Äôh√©lice a pour cons√©quence directe :","choices":["Une augmentation du couple r√©sistant","Un r√©gime moteur √©lev√© √† faible vitesse avion","Une diminution de la tra√Æn√©e"],"answer":1},
{"q":"L‚Äôint√©r√™t principal d‚Äôune h√©lice √† pas variable, en exploitation, est de :","choices":["Maintenir le moteur dans sa plage de rendement optimal","R√©duire la masse du groupe propulsif","Supprimer les variations de couple"],"answer":0},
// ATA 71 ‚Äì Groupe motopropulseur (g√©n√©ralit√©s) ‚Äì niveau Part-66 tr√®s difficile
{"q":"Les turbor√©acteurs simple flux sont historiquement plus bruyants car :","choices":["La totalit√© de la pouss√©e est produite par un jet √† tr√®s haute vitesse","Ils ne poss√®dent pas de traitement acoustique","Ils utilisent une post-combustion permanente"],"answer":0},
{"q":"Les avions de transport civil utilisent majoritairement des turbofans car ceux-ci offrent :","choices":["Un meilleur rendement propulsif √† vitesse subsonique","Une pouss√©e maximale sup√©rieure","Une architecture plus simple"],"answer":0},
{"q":"La fixation avant d‚Äôun moteur sous voilure est con√ßue pour reprendre :","choices":["Les efforts de pouss√©e et les charges massiques","Les efforts gyroscopiques uniquement","Les efforts thermiques du moteur"],"answer":0},
{"q":"Un moteur double flux se distingue d‚Äôun simple flux par :","choices":["La s√©paration du d√©bit d‚Äôair en flux primaire et secondaire","La pr√©sence d‚Äôune post-combustion","L‚Äôabsence de turbine basse pression"],"answer":0},
{"q":"Le montage d‚Äôun moteur sous voilure sur pyl√¥ne permet principalement :","choices":["La reprise structurale des efforts et l‚Äôisolation vibratoire","Une r√©duction de la tra√Æn√©e","Une alimentation directe en carburant"],"answer":0},
{"q":"La loi de la pouss√©e F = Qa (Ve ‚àí Vs) montre que la pouss√©e d√©pend directement :","choices":["De la variation de vitesse de la masse d‚Äôair traversant le moteur","De la temp√©rature des gaz","Du r√©gime de rotation du compresseur"],"answer":0},
{"q":"La r√©duction du bruit sur les moteurs modernes repose principalement sur :","choices":["Le ralentissement du jet par augmentation du taux de dilution et l‚Äôabsorption acoustique","La diminution du d√©bit massique","L‚Äôaugmentation de la pression de sortie"],"answer":0},
{"q":"Le chauffage des pales moteur est mis en ≈ìuvre afin de :","choices":["Emp√™cher la formation de glace susceptible de provoquer un d√©s√©quilibre","Augmenter la pouss√©e disponible","R√©duire la consommation sp√©cifique"],"answer":0},
// ATA 72 ‚Äì Moteur (parties internes) ‚Äì niveau Part-66 tr√®s difficile
{"q":"Lorsqu‚Äôun moteur doit rester compact tout en d√©livrant un rapport de compression √©lev√© par √©tage, le compresseur retenu est g√©n√©ralement :","choices":["Axial multistage","Centrifuge","Mixte axial-centrifuge","√Ä palettes oscillantes"],"answer":1},
{"q":"L‚Äôaugmentation du taux de dilution sur un turbofan am√©liore le rendement propulsif principalement parce que :","choices":["La vitesse d‚Äô√©jection moyenne du flux est r√©duite","La temp√©rature turbine est abaiss√©e","La pression totale en sortie de compresseur augmente"],"answer":0},
{"q":"Dans un compresseur axial, un √©tage complet comprend n√©cessairement :","choices":["Un rotor suivi d‚Äôun stator","Un stator suivi d‚Äôun rotor","Un rotor seul"],"answer":0},
{"q":"Le choix majoritaire d‚Äôun compresseur mixte sur moteurs modernes s‚Äôexplique par :","choices":["Un compromis rendement / longueur / stabilit√©","Une simplicit√© m√©canique","Une r√©duction du nombre de paliers"],"answer":0},
{"q":"Le cycle thermodynamique r√©el d‚Äôune turbine √† gaz s‚Äô√©carte du cycle de Brayton id√©al principalement √† cause :","choices":["Des pertes a√©rodynamiques et thermiques","Du rendement de combustion parfait","De l‚Äôabsence de compression isentropique"],"answer":0},
{"q":"Le brevet d√©pos√© par M. Guillaume en 1921 concerne principalement :","choices":["Le principe g√©n√©ral de la turbine √† gaz","Le turbofan double flux","Le turbor√©acteur √† postcombustion"],"answer":0},
{"q":"La ventilation interne moteur est essentielle car elle permet notamment :","choices":["Le refroidissement d‚Äô√©quipements et la limitation des contraintes thermiques","L‚Äôaugmentation du rendement propulsif","La r√©gulation directe du r√©gime moteur"],"answer":0},
{"q":"Les traitements acoustiques internes de soufflante sont con√ßus pour att√©nuer prioritairement :","choices":["Les bruits li√©s aux interactions rotor/stator","Les vibrations m√©caniques du r√©ducteur","Les chocs thermiques turbine"],"answer":0},
{"q":"Un turbomoteur √† turbine libre se distingue d‚Äôune turbine li√©e par le fait que :","choices":["La turbine de puissance est m√©caniquement ind√©pendante du g√©n√©rateur de gaz","Le compresseur est entra√Æn√© par la turbine de puissance","Le r√©ducteur est supprim√©"],"answer":0},
{"q":"Un turbor√©acteur est qualifi√© de double corps lorsque :","choices":["Deux ensembles tournant √† des vitesses diff√©rentes coexistent","Deux chambres de combustion sont install√©es","Deux compresseurs axiaux sont mont√©s en parall√®le"],"answer":0},
{"q":"Dans un moteur double corps, la s√©paration BP/HP permet principalement :","choices":["Une meilleure stabilit√© et un rendement accru sur une large plage de r√©gimes","Une augmentation de la pouss√©e maximale","Une r√©duction de la masse moteur"],"answer":0},
{"q":"Le terme GTR d√©signe un moteur dont la propulsion est assur√©e par :","choices":["La r√©action directe des gaz √©ject√©s","Une h√©lice entra√Æn√©e m√©caniquement","Un arbre de puissance externe"],"answer":0},
// ATA 73 ‚Äì Carburant & commande carburant ‚Äì niveau Part-66 tr√®s difficile
{"q":"Dans un turbor√©acteur, la combustion du carburant est r√©alis√©e dans une zone o√π :","choices":["La vitesse de l‚Äôair est fortement r√©duite et stabilis√©e","La pression est minimale","Le d√©bit d‚Äôair est maximal"],"answer":0},
{"q":"La vanne de d√©charge compresseur est dimensionn√©e afin de :","choices":["Maintenir la stabilit√© du compresseur hors point de fonctionnement","R√©duire la consommation sp√©cifique","Alimenter les syst√®mes cabine"],"answer":0},
{"q":"Le r√¥le principal du FCU dans un syst√®me moderne est de :","choices":["Doser le carburant en fonction des ordres et des param√®tres moteur","Commander directement le d√©bit d‚Äôair","Optimiser le rendement propulsif global"],"answer":0},
{"q":"L‚ÄôOMS embarqu√© est destin√© avant tout √† :","choices":["L‚Äôaide au diagnostic et √† la maintenance","La gestion automatique du moteur","La surveillance carburant en temps r√©el"],"answer":0},
{"q":"Sur un moteur FADEC, la r√©gulation carburant est caract√©ris√©e par :","choices":["Une commande enti√®rement num√©rique avec lois de protection int√©gr√©es","Un contr√¥le purement hydrom√©canique","Une action directe du pilote sur le d√©bit"],"answer":0},
{"q":"En cas de d√©faillance du canal principal FADEC carburant :","choices":["Un canal redondant assure un fonctionnement d√©grad√©","Le moteur s‚Äôarr√™te automatiquement","La commande devient purement manuelle"],"answer":0},
{"q":"La commande de coupure carburant par poign√©e coupe-feu entra√Æne :","choices":["Une fermeture m√©canique des vannes carburant moteur","Une simple r√©duction du d√©bit carburant","Un arr√™t √©lectrique sans action carburant"],"answer":0},
{"q":"Le d√©bit carburant inject√© est ajust√© principalement en fonction :","choices":["Du r√©gime moteur, de la pouss√©e demand√©e et des protections","De la temp√©rature cabine","De la pression hydraulique"],"answer":0},
{"q":"Sur turbor√©acteur, le carburant est √©galement utilis√© afin de :","choices":["Refroidir des composants et participer √† la lubrification","Augmenter la pression huile","R√©duire le bruit moteur"],"answer":0},
{"q":"Un colmatage progressif du circuit carburant se traduit en priorit√© par :","choices":["Une limitation de pouss√©e et un fonctionnement d√©grad√©","Une augmentation imm√©diate du r√©gime moteur","Une surpression huile"],"answer":0},
// ATA 74 ‚Äì Allumage (niveau Part-66 tr√®s difficile)
{"q":"Avant toute intervention sur un circuit d‚Äôallumage, le respect du d√©lai constructeur est imp√©ratif afin de :","choices":["Permettre la d√©charge compl√®te des exciters haute √©nergie","√âviter un √©chauffement excessif des igniters","Stabiliser la pression carburant r√©siduelle"],"answer":0},
{"q":"Une ventilation humide est prescrite principalement lorsque :","choices":["Du carburant non br√ªl√© est susceptible d‚Äô√™tre pr√©sent dans la chambre","Le moteur a fonctionn√© √† faible r√©gime","La temp√©rature EGT est inf√©rieure √† la normale"],"answer":0},
{"q":"Le syst√®me d‚Äôallumage moteur n‚Äôest requis en fonctionnement continu que :","choices":["Dans des conditions sp√©cifiques d√©finies par le constructeur","Lorsque la pouss√©e maximale est demand√©e","Lors du fonctionnement normal en croisi√®re"],"answer":0},
{"q":"L‚Äôutilisation des bougies d‚Äôallumage est limit√©e dans le temps car :","choices":["La combustion est auto-entretenue une fois √©tablie","Le syst√®me d‚Äôallumage ne supporte pas la haute altitude","Les igniters surchauffent rapidement"],"answer":0},
{"q":"En r√©gime √©tabli, la disparition de l‚Äôallumage n‚Äôentra√Æne g√©n√©ralement pas d‚Äôextinction moteur car :","choices":["La flamme est maintenue par l‚Äô√©nergie thermique et le d√©bit carburant","Le FADEC compense par un enrichissement","La turbine fournit une source d‚Äôignition secondaire"],"answer":0},
{"q":"L‚Äôallumage continu est s√©lectionn√© automatiquement ou manuellement afin de :","choices":["Pr√©venir les extinctions de flamme en conditions perturb√©es","Augmenter la stabilit√© du r√©gime moteur","R√©duire la consommation sp√©cifique"],"answer":0},
{"q":"L‚Äôexciter d‚Äôallumage est con√ßu pour fournir :","choices":["Une impulsion √©lectrique de tr√®s haute √©nergie","Un courant alternatif stabilis√©","Une tension continue basse intensit√©"],"answer":0},
{"q":"Une panne compl√®te du syst√®me d‚Äôallumage en vol se traduit g√©n√©ralement par :","choices":["Aucune cons√©quence tant que la combustion est √©tablie","Un arr√™t moteur imm√©diat","Une survitesse turbine"],"answer":0},
{"q":"Les igniters sont implant√©s dans la chambre de combustion afin de :","choices":["Assurer une inflammation efficace du m√©lange air/carburant","Optimiser la temp√©rature EGT","Limiter les vibrations moteur"],"answer":0},
{"q":"La redondance des circuits d‚Äôallumage est principalement destin√©e √† :","choices":["Garantir la fiabilit√© de l‚Äôallumage lors des phases critiques","Permettre un fonctionnement continu permanent","R√©duire la consommation √©lectrique"],"answer":0},
// ATA 75 ‚Äì Air (niveau Part-66 tr√®s difficile)
{"q":"Le syst√®me d‚Äôanti-givrage d‚Äôentr√©e d‚Äôair est qualifi√© de pr√©ventif car :","choices":["Il emp√™che la formation de glace avant apparition","Il √©limine la glace d√©j√† form√©e","Il agit uniquement apr√®s d√©tection de givrage"],"answer":0},
{"q":"L‚Äôair de pr√©l√®vement moteur destin√© au conditionnement cabine est pr√©lev√© √† un stade o√π :","choices":["La pression et la temp√©rature sont suffisantes","La temp√©rature est minimale","La vitesse d‚Äô√©coulement est maximale"],"answer":0},
{"q":"La surveillance vibratoire moteur est con√ßue pour d√©tecter prioritairement :","choices":["Des d√©s√©quilibres dynamiques et d√©gradations m√©caniques","Des obstructions d‚Äôentr√©e d‚Äôair","Des variations de temp√©rature turbine"],"answer":0},
{"q":"La pr√©sence d‚Äôune post-combustion impose l‚Äôutilisation d‚Äôune tuy√®re variable afin de :","choices":["Adapter la section aux variations de d√©bit et de pression","R√©duire le bruit du jet","Am√©liorer la combustion primaire"],"answer":0},
{"q":"L‚Äôanti-givrage d‚Äôentr√©e d‚Äôair utilisant de l‚Äôair chaud a pour inconv√©nient principal :","choices":["Une p√©nalit√© sur les performances moteur","Une augmentation du d√©bit carburant uniquement","Une r√©duction de la stabilit√© compresseur"],"answer":0},
{"q":"Un d√©faut d‚Äôentr√©e d‚Äôair peut provoquer simultan√©ment :","choices":["Un pompage compresseur et une perte de rendement","Une survitesse turbine","Une augmentation de la pouss√©e"],"answer":0},
{"q":"Le divergent d‚Äôentr√©e d‚Äôair est dimensionn√© afin de :","choices":["Transformer la vitesse en pression statique","Acc√©l√©rer l‚Äôair vers le compresseur","Cr√©er une turbulence contr√¥l√©e"],"answer":0},
{"q":"Le terme ¬´ bleed air ¬ª d√©signe un pr√©l√®vement d‚Äôair effectu√© :","choices":["Sur le compresseur √† un stade interm√©diaire ou √©lev√©","Sur la turbine basse pression","Dans l‚Äôentr√©e d‚Äôair"],"answer":0},
{"q":"Une obstruction partielle de l‚Äôentr√©e d‚Äôair se traduit prioritairement par :","choices":["Une instabilit√© moteur et une d√©gradation des marges de pompage","Une augmentation de la pouss√©e","Une r√©duction du d√©bit carburant command√©"],"answer":0},
{"q":"Le pilotage du syst√®me d‚Äôanti-givrage d‚Äôentr√©e d‚Äôair est g√©n√©ralement :","choices":["Automatique avec possibilit√© de commande manuelle","Exclusivement manuel","Exclusivement automatique sans retour cockpit"],"answer":0},
// ATA 76 ‚Äì Commandes moteur (niveau Part-66 tr√®s difficile)
{"q":"Les fl√®ches repr√©sent√©es sur un sch√©ma de compresseur indiquant des √©l√©ments orientables correspondent g√©n√©ralement √† :","choices":["Des vannes de d√©charge utilis√©es en r√©gime transitoire","Des aubes de stator √† calage variable assurant la stabilit√© du compresseur","Des aubes fixes destin√©es au redressement du flux"],"answer":1},
{"q":"Dans un r√©gulateur m√©canique √† masselottes, l‚Äô√©quilibre est atteint lorsque :","choices":["La force centrifuge est compens√©e par l‚Äôeffort du ressort via le tiroir","La pression carburant atteint sa valeur maximale","Le piston est en but√©e m√©canique"],"answer":0},
{"q":"Sur un r√©gulateur centrifuge, une augmentation du couple r√©sistant provoque initialement :","choices":["Un d√©placement du tiroir modifiant le d√©bit carburant","Une variation directe du d√©bit d‚Äôair","Une augmentation imm√©diate de la pression huile"],"answer":0},
{"q":"Les interrupteurs d‚Äô√©clairage des soutes cargo sont situ√©s localement afin de :","choices":["Garantir une utilisation ind√©pendante de l‚Äôalimentation cockpit","Permettre une commande directe lors des op√©rations sol","R√©duire la charge √©lectrique avion"],"answer":1},
{"q":"La fonction principale des VSV est de :","choices":["Maintenir l‚Äôangle d‚Äôincidence des aubes dans une plage stable","Augmenter la pression totale du compresseur","Limiter la temp√©rature turbine"],"answer":0},
{"q":"Les OGV sont install√©es en sortie de soufflante afin de :","choices":["Transformer l‚Äô√©nergie cin√©tique r√©siduelle en pouss√©e utile","Redresser l‚Äô√©coulement et r√©duire les pertes a√©rodynamiques","R√©guler automatiquement le d√©bit carburant"],"answer":1},
{"q":"Un syst√®me FADEC assure une gestion moteur compl√®te en int√©grant :","choices":["Commande, surveillance et protections automatiques","Uniquement le dosage carburant","Uniquement les protections survitesse"],"answer":0},
{"q":"L‚Äôaction du pilote sur la manette moteur est interpr√©t√©e par le FADEC comme :","choices":["Une demande de pouss√©e traduite en lois de commande","Une commande directe du d√©bit carburant","Une consigne de r√©gime N2"],"answer":0},
{"q":"Le fonctionnement en mode d√©grad√© de commande moteur implique g√©n√©ralement :","choices":["Une limitation des performances avec protections conserv√©es","Une perte de toutes les protections moteur","Un arr√™t automatique du moteur"],"answer":0},
{"q":"La philosophie ¬´ fail-operational ¬ª appliqu√©e aux commandes moteur vise √† :","choices":["Maintenir la fonction malgr√© certaines d√©faillances","Arr√™ter le moteur en cas de panne","Limiter les performances sans redondance"],"answer":0},
// ATA 77 ‚Äì Indications moteur (niveau Part-66 tr√®s difficile)
{"q":"Le rapport Pt7/Pt2 utilis√© pour l‚ÄôEPR est pertinent car il refl√®te :","choices":["La variation de quantit√© de mouvement du flux traversant le moteur","Le r√©gime m√©canique r√©el de la soufflante","La pression carburant inject√©e"],"answer":0},
{"q":"L‚Äôindication N1 est privil√©gi√©e comme param√®tre de pouss√©e car :","choices":["Elle est directement li√©e au flux secondaire propulsif","Elle mesure la temp√©rature turbine","Elle est ind√©pendante de la masse d‚Äôair"],"answer":0},
{"q":"L‚Äôindication N2 correspond au r√©gime du corps haute pression, ce qui implique :","choices":["Une relation directe avec la compression et la temp√©rature turbine","Une mesure de la pouss√©e disponible","Une indication de vitesse avion"],"answer":0},
{"q":"L‚ÄôEGT constitue un param√®tre critique car elle est repr√©sentative :","choices":["Des contraintes thermiques globales du moteur","De la consommation carburant instantan√©e","Du rendement propulsif"],"answer":0},
{"q":"Une EGT excessive peut r√©sulter directement :","choices":["D‚Äôun d√©bit carburant inadapt√© ou d‚Äôun refroidissement insuffisant","D‚Äôune baisse de r√©gime N1","D‚Äôune panne du syst√®me d‚Äôallumage en croisi√®re"],"answer":0},
{"q":"Les param√®tres moteur affich√©s au cockpit proviennent :","choices":["De capteurs associ√©s √† des calculateurs de traitement","D‚Äôun syst√®me purement m√©canique","D‚Äôun r√©seau hydraulique d√©di√©"],"answer":0},
{"q":"La perte de l‚Äôindication N1 n‚Äôentra√Æne pas l‚Äôarr√™t moteur mais conduit √† :","choices":["Une d√©gradation de l‚Äôinformation de pouss√©e pour l‚Äô√©quipage","Une r√©duction automatique du d√©bit carburant","Une augmentation compensatoire de N2"],"answer":0},
{"q":"Sur avion de transport moderne, les indications moteur sont principalement affich√©es sur :","choices":["L‚ÄôECAM","Le ND","Le FCU"],"answer":0},
{"q":"Un capteur EGT d√©faillant est susceptible de provoquer :","choices":["Une alarme erron√©e sans d√©gradation r√©elle du moteur","Une perte imm√©diate de pouss√©e","Un arr√™t moteur automatique"],"answer":0},
{"q":"La surveillance continue des param√®tres moteur a pour objectif principal :","choices":["La protection et la long√©vit√© du moteur","L‚Äôoptimisation exclusive de la consommation","L‚Äôaugmentation syst√©matique de la pouss√©e"],"answer":0},
// ATA 78 ‚Äì √âchappement (niveau Part-66 tr√®s difficile)
{"q":"Un turbofan se distingue fondamentalement d‚Äôun turbor√©acteur simple flux car :","choices":["Il utilise syst√©matiquement une post-combustion","Le d√©bit d‚Äôair est scind√© en un flux primaire chaud et un flux secondaire froid","Il ne comporte pas de turbine basse pression"],"answer":1},
{"q":"La g√©n√©ration de pouss√©e par acc√©l√©ration des gaz est assur√©e par un composant dont la fonction est de :","choices":["Extraire l‚Äô√©nergie des gaz","Convertir la pression en vitesse","Augmenter le d√©bit massique"],"answer":1},
{"q":"Le bo√Ætier d‚Äôaccessoires est entra√Æn√© indirectement par :","choices":["La tuy√®re","La turbine via l‚Äôarbre moteur","La soufflante"],"answer":1},
{"q":"La s√©paration des flux sur un moteur double flux permet principalement :","choices":["Une r√©duction de la temp√©rature turbine","Une diminution du niveau sonore et une am√©lioration du rendement propulsif","Une augmentation de la pression en sortie"],"answer":1},
{"q":"L‚Äô√©l√©vation de pression de l‚Äôair n√©cessaire au cycle moteur est r√©alis√©e par :","choices":["La turbine","Le compresseur","La tuy√®re"],"answer":1},
{"q":"La soufflante contribue √† la pouss√©e totale car elle :","choices":["Acc√©l√®re un grand d√©bit d‚Äôair √† faible variation de vitesse","Augmente la temp√©rature du flux primaire","Stabilise la combustion"],"answer":0},
{"q":"Les sch√©mas repr√©sentant respectivement un stator√©acteur et un moteur √† post-combustion se distinguent principalement par :","choices":["La pr√©sence d‚Äôun compresseur","La pr√©sence d‚Äôune zone de combustion additionnelle en aval turbine","L‚Äôabsence totale de turbine"],"answer":1},
{"q":"Sur un turbofan de forte pouss√©e, l‚Äôinverseur agit sur le flux froid afin de :","choices":["Limiter les contraintes thermiques et m√©caniques","Assurer une efficacit√© maximale du freinage","R√©duire la pression en amont turbine"],"answer":1},
// ATA 79 ‚Äì Huile (niveau Part-66 tr√®s difficile)
{"q":"L‚Äôanalyse spectrom√©trique de l‚Äôhuile est utilis√©e en maintenance pr√©dictive afin de :","choices":["D√©tecter une contamination m√©tallique li√©e √† l‚Äôusure interne","Mesurer la dilution carburant","Contr√¥ler la viscosit√© en service"],"answer":0},
{"q":"L‚Äô√©changeur huile-carburant permet de maintenir l‚Äôhuile dans sa plage thermique car :","choices":["Le carburant absorbe l‚Äôexc√®s de chaleur","L‚Äôhuile est r√©chauff√©e uniquement au d√©marrage","Il augmente la pression d‚Äôhuile"],"answer":0},
{"q":"Lors d‚Äôun d√©marrage moteur, l‚Äôapparition d‚Äôune alarme basse pression huile impose l‚Äôarr√™t car elle indique :","choices":["Une absence de lubrification critique","Un colmatage filtre carburant","Une temp√©rature huile excessive"],"answer":0},
{"q":"Les param√®tres majeurs surveill√©s en exploitation moteur sont choisis car ils refl√®tent :","choices":["Les contraintes m√©caniques et thermiques principales","La consommation carburant uniquement","Le rendement propulsif global"],"answer":0},
{"q":"Sur l‚Äôaffichage moteur, l‚ÄôEGT est un param√®tre critique car elle repr√©sente :","choices":["La limite thermique la plus restrictive du moteur","La temp√©rature d‚Äôhuile en sortie √©changeur","La temp√©rature du flux secondaire"],"answer":0},
{"q":"La pr√©sence de plusieurs pompes de r√©cup√©ration dans un circuit d‚Äôhuile est justifi√©e par :","choices":["La n√©cessit√© d‚Äô√©vacuer l‚Äôhuile de chaque palier","L‚Äôaugmentation de la pression d‚Äôhuile","La r√©duction de la masse du circuit"],"answer":0},
{"q":"Lors d‚Äôune chute de pression d‚Äôhuile, la fermeture d‚Äôune isolation valve vise √† :","choices":["Limiter la perte d‚Äôhuile et prot√©ger le moteur","Augmenter le d√©bit de r√©cup√©ration","Maintenir la temp√©rature huile"],"answer":0},
{"q":"Le micro-contact commandant l‚Äô√©clairage des toilettes est int√©gr√© √† la porte afin de :","choices":["Garantir l‚Äôallumage automatique √† l‚Äôoccupation","Limiter la consommation √©lectrique avion","Permettre un contr√¥le par l‚Äô√©quipage"],"answer":0},
// Autres ‚Äì Bases (m√©canique des fluides / thermo) ‚Äì niveau Part-66 tr√®s difficile
{"q":"Un r√©ducteur √† engrenages d√©cal√©s est pr√©f√©r√© lorsqu‚Äôon cherche principalement √† :","choices":["R√©duire la longueur axiale de l‚Äôensemble","Limiter les efforts radiaux sur les arbres","Augmenter le rendement m√©canique"],"answer":0},
{"q":"Dans le contexte des √©coulements internes moteur, l‚Äôexpression D = V/t correspond √† :","choices":["Un d√©bit volumique","Un d√©bit massique","Une densit√© volumique"],"answer":0},
{"q":"La relation reliant une augmentation de vitesse √† une diminution de pression statique d√©coule du fait que :","choices":["L‚Äô√©nergie m√©canique totale du fluide se conserve","La masse volumique varie avec la vitesse","Le d√©bit volumique diminue"],"answer":0},
{"q":"Dans un √©coulement subsonique, la relation de continuit√© S1V1 = S2V2 traduit :","choices":["La conservation du d√©bit volumique","La conservation de la pression totale","La conservation de la temp√©rature"],"answer":0},
{"q":"La pression totale d‚Äôun √©coulement repr√©sente physiquement :","choices":["La somme de l‚Äô√©nergie statique et cin√©tique par unit√© de volume","La pression mesur√©e uniquement en r√©gime acc√©l√©r√©","La pression ind√©pendante de la vitesse"],"answer":0},
{"q":"Lorsqu‚Äôun fluide acc√©l√®re sans apport d‚Äô√©nergie externe, la baisse de pression statique est due √† :","choices":["La conversion pression ‚Üí √©nergie cin√©tique","Une diminution de la masse volumique","Une perte de charge"],"answer":0},
{"q":"Une transformation adiabatique r√©elle se distingue d‚Äôune transformation isentropique car :","choices":["Elle comporte des pertes irr√©versibles","Elle s‚Äôeffectue √† pression constante","Elle implique un √©change thermique"],"answer":0},
{"q":"Le principe de recul appliqu√© aux moteurs √† r√©action repose directement sur :","choices":["La conservation de la quantit√© de mouvement","La loi de Bernoulli","La continuit√© de l‚Äô√©coulement"],"answer":0},
{"q":"Dans les turbomachines, le d√©bit volumique et le d√©bit massique diff√®rent principalement parce que :","choices":["La masse volumique du fluide n‚Äôest pas constante","La vitesse est variable","La pression statique est constante"],"answer":0},
{"q":"Le choix d‚Äôun compresseur centrifuge sur un turbomoteur d‚Äôh√©licopt√®re est motiv√© par :","choices":["Un fort taux de compression par √©tage et une grande compacit√©","Une meilleure efficacit√© √† haute vitesse avion","Une r√©duction des contraintes thermiques"],"answer":0},
{"q":"La section divergente de l‚Äôentr√©e d‚Äôair d‚Äôun GTR en croisi√®re permet :","choices":["La conversion de vitesse en pression statique avant compression","La r√©duction directe du bruit rayonn√©","L‚Äôacc√©l√©ration du flux vers le compresseur"],"answer":0},
{"q":"Dans un compresseur axial, un √©coulement parall√®le √† l‚Äôaxe moteur implique :","choices":["Une succession de hausses de pression par √©tages","Une acc√©l√©ration continue du flux","Une absence de variation de pression"],"answer":0},
{"q":"L‚ÄôEPR est un indicateur pertinent de pouss√©e car il est directement li√© :","choices":["√Ä la variation de quantit√© de mouvement du flux moteur","Au r√©gime m√©canique N2","√Ä la pression carburant inject√©e"],"answer":0},
{"q":"Un turbomoteur (turboshaft) se distingue d‚Äôun turbopropulseur car il :","choices":["D√©livre uniquement une puissance m√©canique sur arbre","Produit une pouss√©e r√©siduelle significative","Fonctionne sans turbine"],"answer":0},
{"q":"La propulsion par r√©action directe est caract√©ris√©e par :","choices":["L‚Äô√©jection d‚Äôune masse de fluide acc√©l√©r√©e vers l‚Äôarri√®re","La transmission d‚Äôun couple √† une h√©lice","La conversion directe de pression en couple"],"answer":0},
{"q":"Dans une chambre de combustion, l‚Äôinjecteur est con√ßu pour pulv√©riser le carburant afin de :","choices":["Favoriser un m√©lange rapide et une combustion stable","Augmenter la pression totale","R√©duire la temp√©rature turbine"],"answer":0},
{"q":"La conversion 1 bar ‚âà 14,5 psi est utilis√©e car elle correspond √† :","choices":["Une √©quivalence pression m√©trique / imp√©riale","Une conversion d√©bit / pression","Une approximation thermodynamique"],"answer":0},
// Autres ‚Äì Divers (niveau Part-66 tr√®s difficile)
{"q":"Les travaux de Jean Delouvrier (Charles de Louvri√©) concernent principalement :","choices":["Les premi√®res recherches fran√ßaises sur la propulsion par r√©action","Le d√©veloppement industriel des turbofans civils","Les moteurs √† pistons de forte puissance","Les turbines d‚Äôh√©licopt√®res modernes"],"answer":0 },
{"q":"Le premier avion √† r√©action fran√ßais mis en service apr√®s-guerre illustre principalement :","choices":["La transition du moteur √† pistons vers la propulsion par r√©action","L‚Äôintroduction du double flux civil","La propulsion supersonique civile"],"answer":0},
{"q":"Dans une turbomachine, l‚Äôensemble des aubages mobiles constitue le rotor car il :","choices":["Re√ßoit et transmet l‚Äô√©nergie m√©canique","Redresse l‚Äô√©coulement en sortie","Stabilise uniquement le flux"],"answer":0},
{"q":"L‚Äôautonomie typique des blocs batteries de secours (EPSU) est limit√©e volontairement afin de :","choices":["Assurer l‚Äô√©vacuation r√©glementaire sans p√©naliser la masse","Garantir une alimentation cabine prolong√©e","Maintenir les syst√®mes avioniques"],"answer":0},
{"q":"Les projecteurs de type ¬´ logo light ¬ª sont install√©s sur l‚Äôempennage principalement pour :","choices":["Assurer la visibilit√© de l‚Äôidentification compagnie au sol","√âclairer les commandes de vol","Signaler une situation d‚Äôurgence"],"answer":0},
{"q":"Le BITE est int√©gr√© aux syst√®mes avion afin de permettre :","choices":["Un auto-contr√¥le et une aide au diagnostic maintenance","Une r√©paration automatique des d√©fauts","Une surveillance temps r√©el par l‚Äô√©quipage uniquement"],"answer":0},
{"q":"Une architecture ¬´ fail operational ¬ª impose la redondance des calculateurs CMC afin de :","choices":["Maintenir la fonction malgr√© une d√©faillance","Arr√™ter le syst√®me en cas de panne","Limiter les performances avion"],"answer":0},
{"q":"Le CMS distingue un mode normal et un mode interactif afin de :","choices":["S√©parer l‚Äôexploitation automatique de l‚Äôacc√®s maintenance","Isoler les fonctions vol et sol","Permettre un contr√¥le manuel √©quipage"],"answer":0},
{"q":"Les pannes de classe ayant un impact imm√©diat sur le vol sont class√©es car elles :","choices":["Modifient les capacit√©s op√©rationnelles de l‚Äôa√©ronef","N‚Äôaffectent que la maintenance future","Sont uniquement enregistr√©es"],"answer":0},
{"q":"L‚Äôaffichage en temps r√©el des pannes de classe 1 sur l‚ÄôECAM permet principalement :","choices":["Une prise de d√©cision op√©rationnelle imm√©diate","Une pr√©paration maintenance au sol","Un archivage post-vol"],"answer":0},
{"q":"Une panne de classe non annonc√©e √† l‚Äô√©quipage est d√©finie comme telle car :","choices":["Elle n‚Äôa pas d‚Äôimpact op√©rationnel sur le vol","Elle est corrig√©e automatiquement","Elle concerne uniquement le confort cabine"],"answer":0},
{"q":"La capacit√© m√©moire d‚Äôun syst√®me de type 1 (64 legs) est d√©finie afin de :","choices":["Permettre une analyse historique pertinente en maintenance","Conserver l‚Äôint√©gralit√© de la vie avion","Stocker les donn√©es en temps r√©el uniquement"],"answer":0},
{"q":"Un syst√®me de type 3 est dit discret car :","choices":["Il ne g√©n√®re pas de message cockpit et n√©cessite un acc√®s maintenance","Il est d√©pourvu de toute fonction de test","Il fonctionne uniquement en mode manuel"],"answer":0},
{"q":"Le Post Flight Report (PFR) est exploit√© en maintenance car il regroupe :","choices":["Les √©v√©nements et d√©fauts significatifs du dernier vol","Les donn√©es de planification √©quipage","Les param√®tres moteurs en continu"],"answer":0},
{"q":"Le mode interactif du CMS est volontairement limit√© au sol afin de :","choices":["√âviter toute action maintenance impactant la s√©curit√© en vol","R√©duire la charge √©lectrique","Garantir la disponibilit√© du syst√®me"],"answer":0},
{"q":"L‚Äôutilisation prolong√©e des projecteurs d‚Äôatterrissage au sol est √©vit√©e principalement car :","choices":["Le refroidissement par vent relatif est insuffisant","Ils consomment excessivement les batteries","Ils provoquent une g√™ne visuelle"],"answer":0},
{"q":"Le tritium est utilis√© dans les balisages auto-luminescents car il :","choices":["√âmet de la lumi√®re sans alimentation √©lectrique externe","Poss√®de une demi-vie tr√®s courte","Peut √™tre recharg√© √©lectriquement"],"answer":0}
];

// üëâ Tu peux coller ici ta grosse liste compl√®te : le code fonctionne pareil.

// ====== Scores (stock 30, affichage 10)
function loadScores(){ try{ return JSON.parse(localStorage.getItem(LS_SCORES)||'[]') }catch{ return [] } }
function saveScores(list){ localStorage.setItem(LS_SCORES, JSON.stringify(list.slice(-30))); }
function addScoreRow(entry){
  const pct = entry.total ? Math.round(entry.score/entry.total*1000)/10 : 0;
  const tr=document.createElement('tr');
  tr.innerHTML = `<td>${entry.name||'‚Äî'}</td><td>${entry.score}/${entry.total}</td><td>${pct}%</td><td>${entry.when}</td>`;
  $('#scoreTableBody').appendChild(tr);
}
function renderScoreTable(){
  const body=$('#scoreTableBody'); body.innerHTML='';
  const list=loadScores(); const view=list.slice(-10).reverse(); // 10 derniers, r√©cents en haut
  view.forEach(addScoreRow);
}
$('#clearScores').onclick=()=>{ localStorage.removeItem(LS_SCORES); renderScoreTable(); drawChart(); };

// ====== Graph progression (utilise jusqu‚Äô√† 30 entr√©es)
function drawChart(){
  const svg=$('#chart'); svg.innerHTML='';
  const list=loadScores(); const values=list.map(e=>Math.round(e.score/e.total*100));
  const N=values.length, W=320, H=120, pad=12;
  // axes
  const ax=document.createElementNS('http://www.w3.org/2000/svg','path');
  ax.setAttribute('d',`M${pad},${H-pad}H${W-pad} M${pad},${pad}V${H-pad}`);
  ax.setAttribute('stroke','currentColor'); ax.setAttribute('fill','none'); ax.setAttribute('opacity','0.4');
  svg.appendChild(ax);
  if(!N) return;
  const start=Math.max(0,N-20), arr=values.slice(start);
  const step=(W-2*pad)/Math.max(1,arr.length-1);
  const pts=arr.map((v,k)=>[pad+k*step,(H-pad)-(v/100)*(H-2*pad)]);
  const d=pts.map((p,k)=>(k?'L':'M')+p[0]+','+p[1]).join(' ');
  const path=document.createElementNS('http://www.w3.org/2000/svg','path');
  path.setAttribute('d',d); path.setAttribute('fill','none'); path.setAttribute('stroke','currentColor');
  svg.appendChild(path);
}
renderScoreTable(); drawChart();

// ====== Timer
function clearTick(){ if(tickHandle){ clearInterval(tickHandle); tickHandle=null; } }
function setTimer(v){ timerEl.textContent=v; }
function startTick(){
  clearTick(); timeLeft=perQ; setTimer(timeLeft);
  tickHandle=setInterval(()=>{ if(paused) return; timeLeft--; setTimer(Math.max(0,timeLeft)); if(timeLeft<=0){ clearTick(); onTimeout(); } },1000);
}

// ====== Progress + badge
function renderProgress(){
  const total=filteredQuestions.length;
  progressTxt.textContent=`Question ${Math.min(i+1,total)}/${total}`;
  const pct = total? Math.round(i/total*100) : 0;
  progressBar.style.width = pct+'%';
}
function showBadge(kind){
  const el=$('#prevBadge'); el.className='badge-status';
  if(!kind){ el.style.display='none'; return; }
  el.style.display='inline-block';
  el.textContent = kind==='ok'?'OK':(kind==='bad'?'FAUX':'BOF');
  el.classList.add(kind==='ok'?'badge-ok':(kind==='bad'?'badge-bad':'badge-bof'));
  setTimeout(()=>{ el.style.display='none'; }, 1500);
}

// ====== Rendu question (m√©lange des r√©ponses)
function renderQuestion(){
  const total=filteredQuestions.length;
  if(i>=total){ finishGame(); return; }

  const current=filteredQuestions[questionOrder[i]];
  const shuffled = current.choices.map((text,idx)=>({text,idx})).sort(()=>Math.random()-0.5);
  current.shuffledMap = shuffled.map(o=>o.idx);
  current.shuffledAnswer = shuffled.findIndex(o=>o.idx===current.answer);

  qEl.textContent=current.q;
  renderProgress();
  feedbackEl.textContent='';
  choicesEl.innerHTML='';

  shuffled.forEach((item, idx)=>{
    const b=document.createElement('button');
    b.className='opt'; b.textContent=item.text;
    b.addEventListener('click', ()=> onSelect(idx, b));
    choicesEl.appendChild(b);
  });

  if(running && !paused) startTick();
}
function highlightGood(){
  const cur=filteredQuestions[questionOrder[i]];
  const good = (cur && typeof cur.shuffledAnswer==='number') ? cur.shuffledAnswer : cur.answer;
  document.querySelectorAll('.opt').forEach((b,idx)=>{ b.disabled=true; if(idx===good) b.classList.add('correct'); });
}
function disableAll(){ document.querySelectorAll('.opt').forEach(b=>b.disabled=true); }

// ====== S√©lection / Timeout
function onSelect(idx, btn){
  if(!running || paused) return;
  clearTick();
  const curQ=filteredQuestions[questionOrder[i]];
  const goodShuffled = (typeof curQ.shuffledAnswer==='number') ? curQ.shuffledAnswer : curQ.answer;
  const pickedOriginal = Array.isArray(curQ.shuffledMap) ? curQ.shuffledMap[idx] : idx;

  // log pour le r√©sum√©
  answersLog[i] = {
    index:i, q:curQ.q, choices:curQ.choices.slice(),
    correctIndex:curQ.answer, pickedIndex:pickedOriginal,
    correct:(idx===goodShuffled), timedOut:false
  };
  buildSummary(); // ‚úÖ update live

  if(mode==='TRAIN'){
    highlightGood();
    if(idx===goodShuffled){
      score++; scoreEl.textContent=score;
      feedbackEl.innerHTML = `<span class="ok"><b>Bonne r√©ponse !</b></span>`;
      showBadge('ok');
    }else{
      btn.classList.add('wrong');
      feedbackEl.innerHTML = `<span class="bad"><b>Faux.</b></span>`;
      showBadge('bad');
    }
  }else{
    disableAll(); // examen : pas de correction imm√©diate
  }

  setTimeout(()=>{ i++; renderQuestion(); }, 800);
}
function onTimeout(){
  if(!running) return;
  const curQ=filteredQuestions[questionOrder[i]];
  answersLog[i] = {
    index:i, q:curQ.q, choices:curQ.choices.slice(),
    correctIndex:curQ.answer, pickedIndex:null, correct:false, timedOut:true
  };
  buildSummary(); // ‚úÖ update live
  if(mode==='TRAIN'){
    highlightGood();
    feedbackEl.innerHTML = `<span class="muted"><b>Temps √©coul√©.</b></span>`;
    showBadge('bad');
  }else{
    disableAll();
  }
  setTimeout(()=>{ i++; renderQuestion(); }, 800);
}

// ====== S√©lection des questions
function buildFilteredQuestions(){
  // Utiliser TOUTES les questions disponibles
  const arr = shuffle(QUESTIONS.map((q, idx) => ({ q, idx })));
  filteredQuestions = arr.map(o => o.q);
  questionOrder = shuffle([...filteredQuestions.keys()]);
}


// ====== D√©marrer / Pause / Stop
function resetState(){
  running=false; paused=false; i=0; score=0; answersLog=[];
  scoreEl.textContent='0'; clearTick(); timerEl.textContent='0';
  progressBar.style.width='0%'; progressTxt.textContent='Question 0/0';
  qEl.textContent='Clique sur D√©marrer'; choicesEl.innerHTML=''; feedbackEl.textContent='';
  $('#summaryCard').style.display='block';
  $('#summaryStats').innerHTML = '<span class="muted">En attente‚Ä¶</span>';
  $('#summaryList').innerHTML = '<span class="muted">Aucune r√©ponse pour le moment.</span>';
}
function startGame(fromSnapshot=false){
  mode = 'TRAIN';
  perQ = 15; // 10 secondes fixes par question	
  if(!fromSnapshot) buildFilteredQuestions();
  running=true; paused=false; i=0; score=0; answersLog=[];
  renderQuestion();
  $('#pauseBtn').disabled=false; $('#stopBtn').disabled=false;
  saveSnapshot();
}
$('#startBtn').onclick=()=>{ resetState(); startGame(false); };
$('#pauseBtn').onclick=()=>{
  if(!running) return;
  paused = !paused;
  $('#pauseBtn').textContent = paused? 'Reprendre' : 'Pause';
  if(!paused) startTick();
  saveSnapshot();
};
$('#stopBtn').onclick=()=> finishGame();

// ====== R√©sum√© + enregistrement du score
function recordFinalScore(){
  const name = (pseudoInput.value||'').trim() || 'Anonyme';
  const entry = { name, score, total: filteredQuestions.length, when: nowStamp() };

  // garder l'historique d√©taill√© pour ce QCM
  const list = loadScores();
  list.push(entry);
  saveScores(list);

  // calcul du pourcentage actuel
  const pct = entry.total ? (entry.score / entry.total * 100) : 0;
  const pctTxt = Math.round(pct * 10) / 10; // ex: 82.5
  const currentSimple = `${name} ${pctTxt}%`;

  // --- BEST SCORE POUR LE SOMMAIRE ---
  // Lire l'ancien meilleur s'il existe
  const prevSimple = localStorage.getItem('score_qcmgene_v1') || '';
  // Extraire le pourcentage num√©rique de l'ancien (ex "Adrien 82.5%" -> 82.5)
  let prevPct = -1;
  const m = prevSimple.match(/([0-9]+(?:\.[0-9]+)?)%/);
  if (m) {
    prevPct = parseFloat(m[1]);
  }

  // Si pas d'ancien ou si le pourcentage actuel est meilleur -> on remplace
  if (pct > prevPct) {
    localStorage.setItem('score_qcmgene_v1', currentSimple);
  }

  // rafra√Æchir affichage interne
  renderScoreTable();
  drawChart();
}

function buildSummary(){
  const total = filteredQuestions.length || 0;

  let ok=0, bad=0, to=0, answered=0;

  const lines = (answersLog || [])
    .filter(r => r) // uniquement les questions d√©j√† logg√©es
    .map((r, idx)=> {
      answered++;

      const corr = r.choices[r.correctIndex];
      const user = r.pickedIndex===null ? '(aucune/temps)' : r.choices[r.pickedIndex];

      if(r.correct) ok++; else if(r.timedOut) to++; else bad++;

      const cls = r.correct ? 'ok' : 'bad';
      return `<div class="${cls}">
        Q${r.index+1}. ${r.q}
        <div class="small">Ta r√©ponse: <b>${user}</b> ‚Äî Corr: <b>${corr}</b></div>
      </div>`;
    }).join('');

  $('#summaryStats').innerHTML =
    `Score: <b>${score}</b> / ${total}
     &nbsp; | &nbsp; R√©pondu: <b>${answered}</b> / ${total}
     &nbsp; | &nbsp; OK: <span class="ok">${ok}</span>
     ‚Äì Faux: <span class="bad">${bad}</span>
     ‚Äì Temps: <span class="bad">${to}</span>`;

  $('#summaryList').innerHTML = lines || '<span class="muted">Aucune r√©ponse pour le moment.</span>';
}
function finishGame(){
  if(!running) return;
  clearTick(); running=false; paused=false;
  $('#pauseBtn').disabled=true; $('#stopBtn').disabled=true;

  if(mode==='EXAM'){
    score = answersLog.reduce((acc,r)=> acc + (r.correct?1:0), 0);
    scoreEl.textContent=score;
  }
  buildSummary();
  $('#summaryCard').style.display='block';
  recordFinalScore();
  localStorage.removeItem(LS_SNAPSHOT);
}
$('#printSummary').onclick=()=>window.print();
$('#closeSummary').onclick=()=>$('#summaryCard').style.display='none';

// ====== Snapshot (reprendre une partie)
function saveSnapshot(){
  if(!running) return;
  const snap={ t:Date.now(), mode, perQ, i, score, filteredQuestions, questionOrder, answersLog };
  localStorage.setItem(LS_SNAPSHOT, JSON.stringify(snap));
}
function loadSnapshot(){ try{ return JSON.parse(localStorage.getItem(LS_SNAPSHOT)||'null') }catch{ return null } }
function applySnapshot(s){ mode=s.mode; perQ=s.perQ; i=s.i; score=s.score; filteredQuestions=s.filteredQuestions; questionOrder=s.questionOrder; answersLog=s.answersLog||[]; $('#mode').value=mode; $('#qSeconds').value=perQ; scoreEl.textContent=score; renderQuestion(); }
(function maybeShowResume(){
  const s=loadSnapshot(); if(!s) return;
  const btn=$('#resumeBtn'); btn.style.display='inline-block';
  btn.onclick=()=>{ btn.style.display='none'; running=true; paused=false; applySnapshot(s); $('#pauseBtn').disabled=false; $('#stopBtn').disabled=false; startTick(); };
})();

// ====== Wire + boot



(function boot(){ progressTxt.textContent='Question 0/0'; timerEl.textContent='0'; renderScoreTable(); drawChart(); })();
</script>
</body>
</html>


